"use strict";(self["webpackChunkmy_store"]=self["webpackChunkmy_store"]||[]).push([[893],{2617:function(t,o,r){r.d(o,{Xq:function(){return i},ac:function(){return a},cn:function(){return s},t2:function(){return c}});const e="http://localhost:3000";async function n(t,o="GET",r=null){const n={method:o,headers:{"Content-Type":"application/json"}};r&&(n.body=JSON.stringify(r));try{const o=await fetch(`${e}/${t}`,n);if(!o.ok)throw new Error(`Kết nối thất bại ${t}`);return await o.json()}catch(c){throw console.error(c),c}}async function c(){return await n("Products")}async function s(t){try{const o=await n("User","POST",t);if(o)return console.log("Người dùng đã được thêm vào hệ thống:"),o;throw new Error("Không có phản hồi từ API khi thêm người dùng")}catch(o){throw console.error("Lỗi khi thêm người dùng:",o),o}}async function a(t){const o=await c();return o.filter((o=>o.name.toLowerCase().startsWith(t.toLowerCase())))}async function i(t){try{const o=await n(`CartProducts?productId=${t.id}`);if(o.length>0){const t=o[0].quantity+1;await n(`CartProducts/${o[0].id}`,"PUT",{quantity:t})}else await n("CartProducts","POST",{productId:t.id,quantity:1});console.log("Sản phẩm đã được thêm vào giỏ hàng:",t)}catch(o){throw console.error("Lỗi khi thêm sản phẩm vào giỏ hàng:",o),o}}},4074:function(t,o,r){r.r(o),r.d(o,{default:function(){return E}});var e=r(6252);const n={class:"product"};function c(t,o,r,c,s,a){const i=(0,e.up)("Navbar"),d=(0,e.up)("ProductList"),u=(0,e.up)("Footer");return(0,e.wg)(),(0,e.iD)("div",n,[(0,e.Wm)(i),(0,e.Wm)(d),(0,e.Wm)(u)])}var s=r(1670),a=r(3577),i=r(9963);const d=t=>((0,e.dD)("data-v-39dc1b5d"),t=t(),(0,e.Cn)(),t),u={class:"product"},l={class:"container-lg"},h={class:"container-lg category-selector"},g=d((()=>(0,e._)("option",{value:""},"All",-1))),p=d((()=>(0,e._)("option",{value:"ao"},"Shirt&Hoodie",-1))),y=d((()=>(0,e._)("option",{value:"quan"},"Pants & Trouser",-1))),m=d((()=>(0,e._)("option",{value:"giay"},"Shoes",-1))),f=[g,p,y,m],w={class:"product-danhsach"},v={class:"product-link"},P={class:"product-card"},C=["src"],_={class:"product-name",style:{"font-size":"18px"}},$={class:"product-price",style:{"font-size":"18px"}};function k(t,o,n,c,s,d){const g=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)("div",u,[(0,e._)("div",l,[(0,e._)("h2",null,(0,a.zw)(t.category?`Sản phẩm danh mục: ${t.category}`:"All Product"),1)]),(0,e._)("div",h,[(0,e.wy)((0,e._)("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>s.selectedCategory=t),onChange:o[1]||(o[1]=(...t)=>d.loadProducts&&d.loadProducts(...t))},f,544),[[i.bM,s.selectedCategory]])]),(0,e._)("div",w,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(d.filteredProducts,(t=>((0,e.wg)(),(0,e.iD)("div",{key:t.id,class:"product-item"},[(0,e._)("div",v,[(0,e._)("div",P,[(0,e.Wm)(g,{to:"/productdetail/"+t.id},{default:(0,e.w5)((()=>[(0,e._)("img",{src:r(990)(`./${t.imageUrl}`),alt:"Product Image",class:"product-image"},null,8,C)])),_:2},1032,["to"]),(0,e._)("div",_,(0,a.zw)(t.name),1),(0,e._)("div",$,"Price : "+(0,a.zw)(d.formatCurrency(t.price)),1)])])])))),128))])])}r(560);var b=r(2617),L={name:"ProductComponent",data(){return{selectedCategory:"",searchQuery:"",products:[]}},mounted(){this.loadProducts()},computed:{filteredProducts(){return this.selectedCategory?this.products.filter((t=>t.category===this.selectedCategory)):this.products}},methods:{async loadProducts(){try{this.products=await(0,b.t2)()}catch(t){console.error("Error loading products:",t)}},async addToCart(t){if(this.$store.getters.isLoggedIn){console.log("Adding to cart:",t);try{await(0,b.Xq)(t),this.$router.push("/cart")}catch(o){console.error("Error adding to cart:",o)}}else alert("Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng"),console.log("User not logged in. Redirecting to login page..."),this.$router.push("/login")},formatCurrency(t){return`${t.toFixed(2)}$`},searchProducts(){this.filteredProducts=this.products.filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}}},I=r(3744);const S=(0,I.Z)(L,[["render",k],["__scopeId","data-v-39dc1b5d"]]);var T=S,q=r(5788),z={name:"ProductPage",components:{Navbar:s.Z,ProductList:T,Footer:q.Z}};const D=(0,I.Z)(z,[["render",c],["__scopeId","data-v-39274c00"]]);var E=D}}]);
//# sourceMappingURL=products.5d375ccb.js.map