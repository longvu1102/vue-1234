"use strict";(self["webpackChunkmy_store"]=self["webpackChunkmy_store"]||[]).push([[511],{2617:function(t,e,n){n.d(e,{Xq:function(){return i},ac:function(){return c},cn:function(){return o},t2:function(){return s}});const a="http://localhost:3000";async function r(t,e="GET",n=null){const r={method:e,headers:{"Content-Type":"application/json"}};n&&(r.body=JSON.stringify(n));try{const e=await fetch(`${a}/${t}`,r);if(!e.ok)throw new Error(`Kết nối thất bại ${t}`);return await e.json()}catch(s){throw console.error(s),s}}async function s(){return await r("Products")}async function o(t){try{const e=await r("User","POST",t);if(e)return console.log("Người dùng đã được thêm vào hệ thống:"),e;throw new Error("Không có phản hồi từ API khi thêm người dùng")}catch(e){throw console.error("Lỗi khi thêm người dùng:",e),e}}async function c(t){const e=await s();return e.filter((e=>e.name.toLowerCase().startsWith(t.toLowerCase())))}async function i(t){try{const e=await r(`CartProducts?productId=${t.id}`);if(e.length>0){const t=e[0].quantity+1;await r(`CartProducts/${e[0].id}`,"PUT",{quantity:t})}else await r("CartProducts","POST",{productId:t.id,quantity:1});console.log("Sản phẩm đã được thêm vào giỏ hàng:",t)}catch(e){throw console.error("Lỗi khi thêm sản phẩm vào giỏ hàng:",e),e}}},6567:function(t,e,n){n.d(e,{Z:function(){return D}});var a=n(6252),r=n(3577);const s=t=>((0,a.dD)("data-v-2cd21672"),t=t(),(0,a.Cn)(),t),o={class:"quangcao container-fluid"},c=s((()=>(0,a._)("h2",null,"Black Friday Countdown",-1))),i={class:"countdown"},l={class:"time-block"},u={class:"time"},d=s((()=>(0,a._)("span",{class:"unit"},"Day",-1))),h={class:"time-block"},m={class:"time"},p=s((()=>(0,a._)("span",{class:"unit"},"Hour",-1))),g={class:"time-block"},v={class:"time"},w=s((()=>(0,a._)("span",{class:"unit"},"Minute",-1))),f={class:"time-block"},y={class:"time"},_=s((()=>(0,a._)("span",{class:"unit"},"Second",-1)));function k(t,e,n,s,k,b){return(0,a.wg)(),(0,a.iD)("div",o,[c,(0,a._)("div",i,[(0,a._)("div",l,[(0,a._)("span",u,(0,r.zw)(k.days),1),d]),(0,a._)("div",h,[(0,a._)("span",m,(0,r.zw)(k.hours),1),p]),(0,a._)("div",g,[(0,a._)("span",v,(0,r.zw)(k.minutes),1),w]),(0,a._)("div",f,[(0,a._)("span",y,(0,r.zw)(k.seconds),1),_])])])}var b={name:"QuangCao",data(){return{countdownDate:new Date("2024-04-29T00:00:00Z"),days:0,hours:0,minutes:0,seconds:0,countdownInterval:null}},methods:{updateCountdown(){const t=(new Date).getTime(),e=this.countdownDate-t;this.days=Math.floor(e/864e5),this.hours=Math.floor(e%864e5/36e5),this.minutes=Math.floor(e%36e5/6e4),this.seconds=Math.floor(e%6e4/1e3),e<0&&(clearInterval(this.countdownInterval),this.days=this.hours=this.minutes=this.seconds=0)}},mounted(){this.countdownInterval=setInterval(this.updateCountdown,1e3)},beforeUnmount(){clearInterval(this.countdownInterval)}},C=n(3744);const I=(0,C.Z)(b,[["render",k],["__scopeId","data-v-2cd21672"]]);var D=I},2153:function(t,e,n){n.d(e,{Z:function(){return _}});var a=n(6252),r=n(9963),s=n(3577);const o=t=>((0,a.dD)("data-v-3c118c19"),t=t(),(0,a.Cn)(),t),c={class:"input-group"},i=o((()=>(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("div",{class:"input-group-text"},[(0,a._)("i",{class:"fas fa-search"})])],-1))),l={key:0,class:"loading-message"},u={key:1},d={key:0,class:"search-results"},h=["src"],m={class:"product-details"},p={key:1,class:"no-results"};function g(t,e,o,g,v,w){const f=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("form",{class:"container-lg form form-inline my-2 my-lg-0",onSubmit:e[1]||(e[1]=(0,r.iM)(((...t)=>w.search&&w.search(...t)),["prevent"]))},[(0,a._)("div",c,[i,(0,a.wy)((0,a._)("input",{class:"form-control mr-sm-2 w-auto",type:"search",placeholder:"Search","aria-label":"Search",style:{"margin-top":"5px"},"onUpdate:modelValue":e[0]||(e[0]=t=>v.searchQuery=t)},null,512),[[r.nr,v.searchQuery]])])],32),v.loading?((0,a.wg)(),(0,a.iD)("div",l,"Loading...")):((0,a.wg)(),(0,a.iD)("div",u,[v.searchResults.length>0?((0,a.wg)(),(0,a.iD)("div",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(v.searchResults,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"product-card"},[(0,a.Wm)(f,{to:"/productdetail/"+t.id},{default:(0,a.w5)((()=>[(0,a._)("img",{src:n(990)(`./${t.imageUrl}`),alt:"Product Image"},null,8,h)])),_:2},1032,["to"]),(0,a._)("div",m,[(0,a._)("h3",null,(0,s.zw)(t.name),1),(0,a._)("p",null,(0,s.zw)(t.description),1),(0,a._)("span",null,"Price: $"+(0,s.zw)(t.price),1)])])))),128))])):((0,a.wg)(),(0,a.iD)("div",p,"No results found"))]))])}var v=n(2617),w={name:"SearchProduct",data(){return{searchQuery:"",searchResults:[],loading:!1}},methods:{async search(){try{if(this.loading=!0,""===this.searchQuery)return this.searchResults=[],void(this.loading=!1);this.searchResults=await(0,v.ac)(this.searchQuery),this.loading=!1}catch(t){console.error("Error searching products:",t),this.loading=!1}}},watch:{searchQuery:function(){this.search()}}},f=n(3744);const y=(0,f.Z)(w,[["render",g],["__scopeId","data-v-3c118c19"]]);var _=y},5678:function(t,e,n){n.r(e),n.d(e,{default:function(){return l}});var a=n(6252);function r(t,e,n,r,s,o){const c=(0,a.up)("Search",!0);return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(c)])}var s=n(2153),o={name:"SearchView",components:{Search:s.Z}},c=n(3744);const i=(0,c.Z)(o,[["render",r],["__scopeId","data-v-06e303dc"]]);var l=i},7895:function(t,e,n){n.r(e),n.d(e,{default:function(){return K}});var a=n(6252);const r={class:"shopping-cart-page"};function s(t,e,n,s,o,c){const i=(0,a.up)("Navbar"),l=(0,a.up)("ShoppingCart"),u=(0,a.up)("Quangcao"),d=(0,a.up)("Footer");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(i),(0,a.Wm)(l),(0,a.Wm)(u),(0,a.Wm)(d)])}var o=n(1670),c=n(3577),i=n(9963);const l=t=>((0,a.dD)("data-v-23b41cd7"),t=t(),(0,a.Cn)(),t),u={class:"shopping-cart container mt-4"},d={key:0,class:"text-center"},h=l((()=>(0,a._)("div",{class:"loading-spinner"},null,-1))),m=[h],p={key:1},g={key:0},v=l((()=>(0,a._)("h1",{class:"empty-cart-message text-center"}," Your shopping cart is empty, please add items to the cart ",-1))),w=[v],f={key:1},y=l((()=>(0,a._)("h2",{class:"cart-title"},"Shopping Cart",-1))),_={class:"cart-items"},k={class:"row"},b={class:"col-md-3"},C=["src"],I={class:"col-md-6 mt-5"},D={class:"item-details ml-3"},S={class:"product-name font-weight-bold"},z=l((()=>(0,a._)("br",null,null,-1))),$={class:"product-size"},A=l((()=>(0,a._)("br",null,null,-1))),P={class:"product-price",style:{"font-size":"17px","font-weight":"bold"}},T={class:"col-md-3 mt-4"},F={class:"item-actions"},q=l((()=>(0,a._)("span",null,"Quantity :",-1))),Z=["onUpdate:modelValue"],Q=["onClick"],x={class:"cart-total text-right"};function L(t,e,r,s,o,l){return(0,a.wg)(),(0,a.iD)("div",u,[l.loading?((0,a.wg)(),(0,a.iD)("div",d,m)):((0,a.wg)(),(0,a.iD)("div",p,[l.cartItems&&0==l.cartItems.length?((0,a.wg)(),(0,a.iD)("div",g,w)):((0,a.wg)(),(0,a.iD)("div",f,[y,(0,a._)("div",_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.cartItems,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"cart-item border p-3 mb-3"},[(0,a._)("div",k,[(0,a._)("div",b,[(0,a._)("img",{src:n(990)(`./${t.imageUrl}`),alt:"Product Image",class:"product-image"},null,8,C)]),(0,a._)("div",I,[(0,a._)("div",D,[(0,a._)("span",S,(0,c.zw)(t.name),1),z,(0,a._)("span",$,"Size: "+(0,c.zw)(t.selectedSize),1),A,(0,a._)("span",P,"Price: "+(0,c.zw)(t.price.toFixed(2))+"$",1)])]),(0,a._)("div",T,[(0,a._)("div",F,[q,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,min:"1",class:"quantity-input mb-2",onInput:e[0]||(e[0]=(...t)=>l.updateTotalAmount&&l.updateTotalAmount(...t))},null,40,Z),[[i.nr,t.quantity]]),(0,a._)("button",{onClick:e=>l.confirmRemoveFromCart(t),class:"btn btn-danger remove-button btn-block"}," Remove ",8,Q)])])])])))),128))]),(0,a._)("div",x,[(0,a._)("h4",null,"Total: "+(0,c.zw)(l.formattedTotalAmount)+"$",1),(0,a._)("button",{onClick:e[1]||(e[1]=(...t)=>l.placeOrderForAll&&l.placeOrderForAll(...t)),class:"btn-checkout btn-block"}," Checkout All ")])]))]))])}var R={name:"ShoppingCartComponent",computed:{cartItems(){return this.$store.state.cart},loading(){return 0===this.cartItems.length&&!this.cartLoaded},totalAmount(){return this.cartItems.reduce(((t,e)=>t+e.price*e.quantity),0)},formattedTotalAmount(){return this.totalAmount.toFixed(2)}},data(){return{cartLoaded:!1}},mounted(){setTimeout((()=>{this.cartLoaded=!0}),2e3)},methods:{confirmRemoveFromCart(t){const e=window.confirm(`Are you sure you want to remove ${t.name} from the cart?`);e&&this.removeFromCart(t.id)},removeFromCart(t){this.$store.commit("removeFromCart",t)},async placeOrderForAll(){if(this.cartItems.length>0)try{await this.$store.commit("updateStockAfterPayment",{cartItems:[...this.cartItems]}),this.$store.commit("emptyCart"),alert("Successfully checked out all items!")}catch(t){console.error("Error while checking out:",t),alert("An error occurred while checking out, please try again later")}else alert("Your cart is empty, there are no items to checkout")},updateTotalAmount(){for(const t of this.cartItems){const e=this.$store.state.products.find((e=>e.id===t.id));if(e){const n=e.sizes.findIndex((e=>e.size===t.selectedSize));if(-1!==n){const a=e.sizes[n].instock;t.quantity>a&&(alert(`You have added more than the available quantity of ${t.name}`),t.quantity=a)}}}}}},U=n(3744);const W=(0,U.Z)(R,[["render",L],["__scopeId","data-v-23b41cd7"]]);var M=W,O=n(6567),E=n(5788),N={name:"ShoppingCartPage",components:{Navbar:o.Z,ShoppingCart:M,Quangcao:O.Z,Footer:E.Z}};const Y=(0,U.Z)(N,[["render",s],["__scopeId","data-v-41b92ee5"]]);var K=Y}}]);
//# sourceMappingURL=cart.880a0340.js.map